<!DOCTYPE html>
<html lang="fr">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RWM6PNFBK4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RWM6PNFBK4');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Djib'Shopper - Commandes SHEIN Djibouti</title>
    <style>
        :root { --primary: #000; --wa: #25D366; --bg-glass: rgba(255, 255, 255, 0.98); }
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0; padding: 20px;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; color: #222;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.8)), 
                        url('https://images.unsplash.com/photo-1445205170230-053b83016050?q=80&w=1920&auto=format&fit=crop');
            background-size: cover; background-position: center; background-attachment: fixed;
        }
        .container {
            background: var(--bg-glass); width: 100%; max-width: 450px;
            padding: 40px 25px; border-radius: 15px; text-align: center; box-sizing: border-box;
        }
        .header-logo { width: 100%; max-width: 160px; height: auto; margin-bottom: 20px; display: block; margin: 0 auto 20px; }
        h2 { font-weight: 900; text-transform: uppercase; letter-spacing: 2px; margin: 0 0 30px 0; border-bottom: 2px solid #eee; padding-bottom: 15px; font-size: 20px; }
        .item-block { background: #f8f8f8; border: 1px solid #ddd; padding: 20px; margin-bottom: 20px; border-radius: 10px; text-align: left; position: relative; }
        label { font-size: 11px; font-weight: bold; color: #777; text-transform: uppercase; display: block; margin-bottom: 5px; }
        input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 14px; margin-bottom: 10px; }
        .add-btn { background: none; border: 2px dashed #aaa; width: 100%; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; color: #555; margin-bottom: 25px; }
        .total-box { background: var(--primary); color: white; padding: 25px; border-radius: 10px; margin-bottom: 20px; }
        .total-price { font-size: 30px; font-weight: bold; display: block; }
        .wa-btn { background: var(--wa); color: white; width: 100%; padding: 20px; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
    </style>
</head>
<body>
    <div class="container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/9/92/SHEIN_logo.svg" alt="SHEIN" class="header-logo">
        <h2>Djib'Shopper ðŸ‡©ðŸ‡¯</h2>
        <div id="items-list">
            <div class="item-block">
                <label>Lien de l'article SHEIN</label>
                <input type="url" class="p-lien" placeholder="Collez le lien ici">
                <div style="display:flex; gap:10px;">
                    <div style="flex:1"><label>Taille / Couleur</label><input type="text" class="p-opt" placeholder="Ex: M, Noir"></div>
                    <div style="flex:1"><label>Prix ($)</label><input type="number" class="p-prix" placeholder="0" oninput="calculer()"></div>
                </div>
            </div>
        </div>
        <button class="add-btn" onclick="ajouter()">+ AJOUTER UN ARTICLE</button>
        <div class="total-box">
            <span id="display-total" class="total-price">0 FDJ</span>
            <span style="font-size:11px; opacity:0.8;">TOTAL (FRAIS DE 700 FDJ/ARTICLE INCLUS)</span>
        </div>
        <button class="wa-btn" onclick="commander()">âž¤ VALIDER SUR WHATSAPP</button>
    </div>

    <script>
        const TAUX = 178; 
        const FRAIS_PAR_ARTICLE = 700; // 700 FDJ par produit, 0% de commission
        const NUMERO_WA = "33766901141";

        function ajouter() {
            const container = document.getElementById('items-list');
            const div = document.createElement('div');
            div.className = 'item-block';
            div.innerHTML = `
                <button onclick="this.parentElement.remove(); calculer();" style="position:absolute; top:10px; right:10px; border:none; background:none; color:red; cursor:pointer; font-weight:bold;">âœ•</button>
                <label>Lien de l'article</label>
                <input type="url" class="p-lien">
                <div style="display:flex; gap:10px;">
                    <div style="flex:1"><label>Options</label><input type="text" class="p-opt"></div>
                    <div style="flex:1"><label>Prix ($)</label><input type="number" class="p-prix" oninput="calculer()"></div>
                </div>`;
            container.appendChild(div);
        }

        function calculer() {
            let totalUsd = 0;
            let nbArticles = 0;
            document.querySelectorAll('.p-prix').forEach(input => {
                let val = parseFloat(input.value);
                if (val > 0) {
                    totalUsd += val;
                    nbArticles++;
                }
            });
            
            if (nbArticles > 0) {
                // NOUVELLE FORMULE : (Somme USD * 178) + (Nombre d'articles * 700)
                let totalFdj = Math.round((totalUsd * TAUX) + (nbArticles * FRAIS_PAR_ARTICLE));
                document.getElementById('display-total').innerText = totalFdj.toLocaleString() + " FDJ";
            } else {
                document.getElementById('display-total').innerText = "0 FDJ";
            }
        }

        function commander() {
            let totalAffiche = document.getElementById('display-total').innerText;
            let message = "Salut Djib'Shopper ðŸ‡©ðŸ‡¯ ! Voici ma commande :\n\n";
            let valid = false;
            document.querySelectorAll('.item-block').forEach((bloc, i) => {
                let lien = bloc.querySelector('.p-lien').value;
                let prix = bloc.querySelector('.p-prix').value;
                if(lien && prix) {
                    valid = true;
                    message += `ðŸ“¦ *Art ${i+1}* : ${lien}\nðŸŽ¨ ${bloc.querySelector('.p-opt').value || "Standard"}\nðŸ’² ${prix} $\n\n`;
                }
            });
            if(!valid) return alert("Remplis au moins un article !");
            message += `------------------\nðŸ’° *TOTAL Ã€ PAYER : ${totalAffiche}*`;
            window.open("https://wa.me/" + NUMERO_WA + "?text=" + encodeURIComponent(message));
        }
    </script>
</body>
</html>
